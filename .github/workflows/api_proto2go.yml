name: Generate API from .proto
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Genereate code for kato api
      uses: brainyard-io/protoc-actions@master
      with:
        path: -I ./ api/kato.proto --go_out=plugins=grpc:./
    - name: push to repo
      uses: ludeeus/action-push@0.0.1
      env:
        "ACTION_MAIL": "info@brainyard.io"
        "ACTION_NAME": "Generate API from .proto"
        "ACTION_BRANCH": "master"
        "ACTION_MESSAGE": "autogenerated go package for kato API"
        "GITHUB_TOKEN": "${{ secrets.DEPLOY_TOKEN }}"
